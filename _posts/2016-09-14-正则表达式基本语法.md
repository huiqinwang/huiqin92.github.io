---
title: 正则表达式基本语法
date: 2016-09-14 16:30:04
categories: MutilSkill
description: 数据预处理过程常常需要使用正则表达式，此文章从原来的CSDN迁移到github
tags:
 - 正则表达式
 - 数据预处理
---

# 第一章　什么是正则表达式

本章主要内容：

- **正则表达式编辑工具**
- **匹配北美电话号码**
- **综合实例**

-------------------

## 正则表达式
> 正则表达式是一种特殊的*字符串模式*,用于匹配一组字符串。如今正则表达式被广泛使用。

## 正则表示工具
－[Regexpal网站](http://www.regexpal.com)
－[在线测试网站](http://tool.oschina.net/regex/)
－其他自行搜索

## 匹配北美电话号码
**电话号码**
:	707-827-719

**匹配方法**
* 式１：707-827-719  　结果：匹配整个电话号码 ——字符串字面值匹配
* 式２：7   　结果：只有字符串中所有单个字符7被匹配——字符字面值匹配
* 式３：[0-9] 　　结果：匹配0到９范围内任意数值 ——字符组／字符集，正则中将方括号视为[元字符][1]
* 式４：[708219]　 　结果：只能匹配方扩内指定数据——字符组
* 式５：[0-9][0-9][0-9]-[0-9][0-9][0-9]-[0-9][0-9][0-9]　结果：匹配整个电话号码——每个[0-9]匹配一个数字
* 式６：\d\d\d-\d\d\d-\d\d\d 　结果：匹配All——字符组简写形式（转义字符）,\d==[0-9]
* 式７：\d\d\d\D\d\d\d\D\d\d\d 　结果：匹配All——\D匹配任何一个非数字字符（此处为-）
* 式８：\d\d\d.\d\d\d.\d\d\d 　结果：匹配All——点号(.)是通配符，可匹配任意字符（行起始符除外）
* 式９：(\d)0\l\D\d\d\l\D\l\d\d 　结果：匹配All——(\d)捕获7，\l反向引用
* 式１０：\d{3}-?\d{3}-?\d{4}　 结果：匹配All——{}为元字符，量词匹配法，量词作用域为前一个作用域：\d匹配一个数字,{3}表示匹配的词出现三次,-为连字符,？连字符可出现或者不出现，接下来同理
* 式１１：(\d{3,4}[.-]?)+ 　结果：匹配All——量词使正则表达式更加简洁:?(0,1)，+(1,n)，*(0,n),{n,m}(n,m)
* 式１２：(\d{3}[.-]?){2}\d{4}　 结果：匹配All——优化上式(上式也能匹配707-827-719-888)

## 综合实例
**正则表达式**
^(\(\d{3}\)|^\d{3}[.-]?)?\d{3}[.-]?\d{4}$
*结果*：匹配整个电话号码
**解释**

 - 式中符号^，表示电话号码会出现在**一行**的起始位置
 - 左括号(为捕获分组起始符
 - \( 表示左括号本身
 - \d匹配一位数字
 - \d之后的{3}为量词，表示匹配三位数字
 - \)匹配右括号本身
 - 竖线符|表示选择，即从多个可选项中选择一个。此处：匹配一个不带括号的区号或者一个带括号的区号。
 - 脱字符^匹配行起始位置
 - \d匹配一位数字
 - {3}表示匹配三位数字的量词
 - [.-]?匹配一个可选的点号或者连字符
 - 右括号)分组结束位置
 - 问号?表示分组可选，及分组中前缀可有可无
 - \d匹配一位数字
 - {4}表示匹配四位数字的量词
 - 美元符$匹配行结束位置

ps:最终匹配十位的北美电话号码，且括号，连字符、或者点号是可选的。

## 简单的模式匹配
>工具：http://gskinner.com/RegExr

 - 字符串字面值
 - 数字
 - 字母
 - 任意字符

## 字符串字面值
 >使用普通的字符（类似像文本中的查找输入关键字），以逐个字符对应的方式查找文本字符串即字符串字面值查找

 注意：RegExr中的字符串区分大小写

## 匹配数字
 - **输入**：\d
\d为字符组简写式来匹配数字
 -  **输入**：[0-9]
 字符组[0-9]表示范围，会匹配0至9范围内的数字。虽然语法不一样，但是效果和上一样
 -  **输入**：[0123456789]
 效果如上
 - **输入**：[01]
 只匹配0和1两个数字

## 匹配非数字字符
>通常将简写式取反，取反的结果就是排除。即“不匹配这些”或者“匹配这些以外的内容”

 - **输入**：\D
 匹配非数字字符，与\d效果相反，例如：12sdfg45，只会匹配sdfg
 - 同理：[^0-9] [^\d]

## 匹配单词和非单词
 - **输入**：\w
 与\D区别：只会匹配字母，数字和下划线。\D还会匹配空格和标点符号。
 - **输入**：[_a-zA-Z0-9]
 此字符组效果同上
 - **输入**：\W
 大写的W，匹配非单词字符。匹配空格、标点和其他非字母、非数字字符。
 - **输入**：[^_a-zA-Z0-9]
  效果与上面的\W同样

### 字符组简写

 - \a            报警符
 - [\b]          退格字符
 - \c x          空格字符
 - \d             数字字符
 - \D           非数字字符
 - \o xxx     字符的八进制
 - \w          单词字符
 - \W           非单词字符
 - \0        　空格字符
 - \x  xx      字符的十六进制
 - \u   xxx    字符的Unicode值

## 匹配空白字符
 - **输入**：\s
 匹配空白符的简写式
 - **输入**：[ \t\n\r]
 字符组，效果同上。它会匹配空格、制表符(\t)、换行符(\n)、回车符(\r)
 - **输入**：取反\S  [^\s] [^  \t\n\r]
  效果：匹配非空白字符。三者效果一样。

### 匹配各种空白符的简写

 - \f     换页符
 - \h    水平空白符
 - \H    非水平空白符
 - \n  　换行符
 - \r 　回车符
 - \s    　空白符
 - \S     非空白符
 - \t      水平制表符
 - \v      垂直制表符
 - \V     非垂直制表符

## 匹配任意字符
 - **输入**：.
 点号匹配任意字符。
 - **输入**：.{8}
 匹配八个字符

 实例：匹配一个单词ANCYENT
 输入:\bA.{5}T\b
 解释：简写式\b匹配单词边界，不消耗任何字符
 字符A和T限定了字符序列的首位字母

## 给文本加标签
　待续...............
---------
## 边界与量词

 - 行或者字符串的起始与结束位置
 - 单词边界（两种）
 - 量词特性
 - 量词实例

## 行的起始与结束

 - **输入**：^
 匹配行或者字符串的起始位置。有的时候会匹配整个文档的起始位置（看你使用的工具搜索方式）。
 - **输入**：$
  匹配行或者字符串的结尾位置

## 单词边界与非单词边界
- **输入**：\bTHE\b
\b为零宽度断言（看起来不存在）即它会匹配空格或者行起始。
- **输入**：\BTHE\B
匹配非单词边界，非单词边界为除单词边界之外的，比如1e3。匹配了e


## 量词
### 量词的特性
1. 贪心
　首先匹配整个字符串。尝试匹配时，它会选定尽可能多的内容，即整个输入。贪心过程会回朔，回朔即首次尝试整个整个字符串，若失败就回退一个字符后再尝试。
2. 懒惰
　它从目标的起始位置开始尝试寻找匹配，每次检查字符串的一个字符，寻找匹配它要的内容。最后，尝试匹配整个字符串。使一个量词成为懒惰，必须在普通量词后添加一个问号(?)。它每次吃一点
3. 占有
　会覆盖整个目标后尝试寻找匹配内容。但是它尝试一次，不会回朔。一般是在普通量词后添加一个加号(+)。不咀嚼，直接吞。

### 基本量词
 - ?           懒惰量词　　　　零个或者一个（可选）
 - +　　  占有量词　　　　一个或者多个
 - *          贪心量词　　　　零个或者多个

 实例：
 　　　888888
 　　　9999999
 　　0000000000

 - 输入:　.*
 它以贪心方式匹配文本中所有字符，所有(8和9)。点号表示任意字符
 - 输入:   9*
 它匹配9那行，匹配9零次或者多次
 - 输入:   9.*
 它匹配9和0那行，匹配9到后面.的数字。
 - 输入: 　9+
 它匹配9那行，因为+表示一次或者多次
 - 输入: 　9?
 它匹配9那行的第一个9(第一次出现了匹配)。
 - 输入: 　99?
 它匹配第一个9和第二个9。

### 匹配特定次数
>　使用花括号可以限制某个范围内匹配的次数，未经修饰的量词就是贪心量词。

 - 输入：7{1}
	会匹配第一次出现的7
 - 输入：7{1,}
   会匹配一个或者对个7

  由上知：7+和7{1,}  7*与7{0,}　7?和7{0,1}效果都是一样
 - 输入：匹配m到n次
   比如7{3,5}会匹配7，三个、四个及五个

**总结**
 - {n}    精确匹配n次
 - {n,}   匹配n次或者更多次
 - {m,n}  匹配m至n次
 - {0,1}    ?相同
 - {1,}       +相同
 - {0,}      *相同

#### 懒惰量词

 - 语法：??        描述：懒惰匹配零次或一次（可选）
 实例：5?   匹配一个5　　　5??：不匹配任何内容，多加一个?使得模式变得懒惰，尽可能匹配少的字符

 - 语法：+?          描述：懒惰匹配一次或者多次
 实例：5+?       只匹配一个5

 - 语法：*?          描述：懒惰匹配零次或者多次
 实例：5*?        不匹配任何内容，因为它选择匹配最少的次数——零次

 - 语法：{n}?          描述：懒惰匹配n次
 -  语法：{n,}?          描述：懒惰匹配n次或者多次
 -  语法：{m,n}?          描述：懒惰匹配m至n次
 实例：5{2,5}?    只匹配两个5

#### 占有量词

[1]: http://www.runoob.com/regexp/regexp-metachar.html
[2]: https://github.com/jmcmanus/pagedown-extra "Pagedown Extra"
[3]: http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference
[4]: http://bramp.github.io/js-sequence-diagrams/
[5]: http://adrai.github.io/flowchart.js/
[6]: https://github.com/benweet/stackedit